<!DOCTYPE html>
<html>

<head>

    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/redux/4.0.4/redux.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/react-router-dom/5.0.1/react-router-dom.js'></script>

    <!-- MOMENT CDN NOT REQUIRED BUT MIGHT USE CDN FOR FUTURE ADDITIONS TO PROJECT
    <script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.js'></script>
    -->

    <style>
      nav {
        display: flex;
        justify-content: space-around;
      }
    </style>

</head>

<body>
<div id="root">
  <h1> SCHOOL DATABASE COMING SOON...</h1>
  <h2> In the meantime, check out the API data below...</h2>
 <h3> <a href="/api/schools"> Schools</a></h3>
 <h3> <a href="/api/students"> Students</a></h3>
</div>


  <script type='text/babel'>

    const { createStore, combineReducers } = Redux;
    const { HashRouter, Link, Route } = ReactRouterDOM;
    const SET_STUDENTS = 'SET_STUDENTS';


    //REDUX STORE STARTS HERE

    //REDUX - COMBINE REDUCERS
    const reducer = combineReducers({
        students: (state = [], action) => {
          if (action.type === SET_STUDENTS) {
            state = action.students;
          }
          return state;
        }
      });

    //REDUX - CREATE REDUX STORE
    const store = createStore(reducer);


    //REDUX / AXIOS - FETCH DATA AND ADD TO STORE

    const fetchStudents = async() => store.dispatch({type: SET_STUDENTS, students: (await axios.get('/api/students')).data})


    const connect = (Component) => {
      class Connected extends React.Component {
        constructor() {
          super();
          this.state = store.getState();
        }

      componentWillUnmount(){
        this.unsubscribe();
      }

      componentDidMount() {
        this.unsubscribe = store.subscribe(() => this.setState(store.getState()));
      }

      render() {
        return (
          <Component {...this.state}{...this.props} />
        );
      }
    }
      return Connected;
    }

        //STEP 2 - BUILD FRONT END FORM AND BUTTONS ETC.

    // keep your redux store as simple as possible, a list of students, and schools will be suffice
    //USE CDNS FOR REDUX ETC.
    //REDUCERS FOR SCHOOLS -
    //REDUCERS FOR STUDENTS - LIST OF STUDENTS AND CURRENT STUDENT
    //COMBINE REDUCERS TO COMBINE THEM

    //REDUX PATTERNS - FOCUS ON THESE AND PRACTICE


//HOME COMPONENT
const Home = () => {
  return (
    <div>
      HOME COMING SOON....
    </div>
  )
}

//SCHOOLS COMPONENT

const Schools = () => {
  return (
    <div>
      SCHOOLS COMING SOON...
    </div>
  )
}


//STUDENTS COMPONENT
const Students = () => {
  return (
    <div>
      STUDENTS COMING SOON...
    </div>
  )
}



//NAV COMPONENT

const Nav = () => {
  return (
    <nav>
      <Link to='/'>Home</Link>
      <Link to='/api/schools'>Schools</Link>
      <Link to='/api/students'>Students</Link>
    </nav>
  )
}




//REACT MAIN APP CLASS COMPONENT

class App extends React.Component {

  constructor() {
    super();
    this.state = {
    }
  }


  render() {
    return (
      <HashRouter>
        <Route component = { Nav } />
        <Route path='/' component ={Home} exact/>
        <Route path='/api/students' component={Students} />
        <Route path='/api/schools' component={Schools} />
      </HashRouter>
    )
  }
}



ReactDOM.render(<App />, document.querySelector('#root'));



  </script>
</body>

</html>
